ambonMUD:
  mode: STANDALONE

  sharding:
    enabled: false
    engineId: engine-1
    zones: []
    advertiseHost: localhost
    # Optional explicit advertised port override. When omitted, the server
    # uses mode-specific defaults (ENGINE=grpc.server.port, STANDALONE=telnetPort).
    #advertisePort: 9090
    registry:
      # STATIC (default) or REDIS
      type: STATIC
      leaseTtlSeconds: 30
      # Optional static assignments used when type=STATIC. If empty, sharded
      # engines only know their own local zone ownership.
      assignments: []
      #assignments:
      #  - engineId: engine-1
      #    host: localhost
      #    port: 9091
      #    zones: [ambon_hub, demo_ruins]
      #  - engineId: engine-2
      #    host: localhost
      #    port: 9092
      #    zones: [noecker_resume]
    handoff:
      ackTimeoutMs: 2000
    # Redis player-location index for O(1) cross-engine tell routing.
    # Requires sharding.enabled=true and redis.enabled=true.
    playerIndex:
      enabled: false
      heartbeatMs: 10000
    # Zone instancing (layering). When enabled, multiple engines may host
    # copies of the same zone. Players on different instances cannot see each
    # other in rooms but can still use tell, gossip, and who.
    instancing:
      enabled: false
      defaultCapacity: 200
      loadReportIntervalMs: 5000
      startZoneMinInstances: 1
      autoScale:
        enabled: false
        evaluationIntervalMs: 30000
        scaleUpThreshold: 0.8
        scaleDownThreshold: 0.2
        cooldownMs: 60000

  grpc:
    server:
      port: 9090
    client:
      engineHost: localhost
      enginePort: 9090

  gateway:
    id: 0
    snowflake:
      idLeaseTtlSeconds: 300
    reconnect:
      maxAttempts: 10
      initialDelayMs: 1000
      maxDelayMs: 30000
      jitterFactor: 0.2
      streamVerifyMs: 2000
    # Multi-engine mode: when engines list is non-empty, the gateway connects
    # to all listed engines and uses SessionRouter for session-to-engine routing.
    # Leave empty for single-engine mode (uses grpc.client config instead).
    engines: []
    #engines:
    #  - id: engine-1
    #    host: localhost
    #    port: 9091
    #  - id: engine-2
    #    host: localhost
    #    port: 9092

  server:
    telnetPort: 4000
    webPort: 8080
    inboundChannelCapacity: 10000
    outboundChannelCapacity: 10000
    sessionOutboundQueueCapacity: 200
    maxInboundEventsPerTick: 1000
    tickMillis: 100

  world:
    resources:
      - world/tutorial_glade.yaml
      - world/ambon_hub.yaml
      - world/noecker_resume.yaml
      - world/demo_ruins.yaml
      - world/low_training_marsh.yaml
      - world/low_training_highlands.yaml
      - world/low_training_mines.yaml
      - world/low_training_barrens.yaml

  persistence:
    backend: YAML
    rootDir: data/players
    worker:
      enabled: true
      flushIntervalMs: 5000

  database:
    jdbcUrl: "jdbc:postgresql://localhost:5432/ambonmud"
    username: ambon
    password: ambon
    maxPoolSize: 5
    minimumIdle: 1

  login:
    maxWrongPasswordRetries: 3
    maxFailedAttemptsBeforeDisconnect: 3

  engine:
    mob:
      maxMovesPerTick: 10
      minWanderDelayMillis: 5000
      maxWanderDelayMillis: 12000
      tiers:
        weak:
          baseHp: 5
          hpPerLevel: 2
          baseMinDamage: 1
          baseMaxDamage: 2
          damagePerLevel: 0
          baseArmor: 0
          baseXpReward: 15
          xpRewardPerLevel: 5
          baseGoldMin: 1
          baseGoldMax: 3
          goldPerLevel: 1
        standard:
          baseHp: 10
          hpPerLevel: 3
          baseMinDamage: 1
          baseMaxDamage: 4
          damagePerLevel: 1
          baseArmor: 0
          baseXpReward: 30
          xpRewardPerLevel: 10
          baseGoldMin: 2
          baseGoldMax: 8
          goldPerLevel: 2
        elite:
          baseHp: 20
          hpPerLevel: 5
          baseMinDamage: 2
          baseMaxDamage: 6
          damagePerLevel: 1
          baseArmor: 1
          baseXpReward: 75
          xpRewardPerLevel: 20
          baseGoldMin: 10
          baseGoldMax: 25
          goldPerLevel: 5
        boss:
          baseHp: 50
          hpPerLevel: 10
          baseMinDamage: 3
          baseMaxDamage: 8
          damagePerLevel: 2
          baseArmor: 3
          baseXpReward: 200
          xpRewardPerLevel: 50
          baseGoldMin: 50
          baseGoldMax: 100
          goldPerLevel: 15
    combat:
      maxCombatsPerTick: 20
      tickMillis: 1000
      minDamage: 1
      maxDamage: 4
      feedback:
        enabled: true
        roomBroadcastEnabled: false
      strDivisor: 3
      dexDodgePerPoint: 2
      maxDodgePercent: 30
      intSpellDivisor: 3
    regen:
      maxPlayersPerTick: 50
      baseIntervalMillis: 5000
      minIntervalMillis: 1000
      msPerConstitution: 200
      regenAmount: 1
      mana:
        baseIntervalMillis: 3000
        minIntervalMillis: 1000
        regenAmount: 1
        msPerWisdom: 200
    scheduler:
      maxActionsPerTick: 100
    statusEffects:
      definitions:
        ignite:
          displayName: "Ignite"
          effectType: DOT
          durationMs: 6000
          tickIntervalMs: 2000
          tickMinValue: 3
          tickMaxValue: 5
          stackBehavior: REFRESH
        poison:
          displayName: "Poison"
          effectType: DOT
          durationMs: 10000
          tickIntervalMs: 2000
          tickMinValue: 2
          tickMaxValue: 4
          stackBehavior: STACK
          maxStacks: 3
        shield_of_faith:
          displayName: "Shield of Faith"
          effectType: SHIELD
          durationMs: 30000
          shieldAmount: 20
          stackBehavior: NONE
        battle_shout:
          displayName: "Battle Shout"
          effectType: STAT_BUFF
          durationMs: 60000
          strMod: 3
          stackBehavior: REFRESH
        rejuvenation:
          displayName: "Rejuvenation"
          effectType: HOT
          durationMs: 10000
          tickIntervalMs: 2000
          tickMinValue: 2
          tickMaxValue: 3
          stackBehavior: REFRESH
        frost_grip:
          displayName: "Frost Grip"
          effectType: ROOT
          durationMs: 4000
          stackBehavior: NONE
        concuss:
          displayName: "Concuss"
          effectType: STUN
          durationMs: 2000
          stackBehavior: NONE
    economy:
      buyMultiplier: 1.0
      sellMultiplier: 0.5
    abilities:
      definitions:
        # --- Warrior ---
        power_strike:
          displayName: "Power Strike"
          description: "A powerful melee strike."
          manaCost: 5
          cooldownMs: 0
          levelRequired: 1
          targetType: ENEMY
          requiredClass: WARRIOR
          effect:
            type: DIRECT_DAMAGE
            minDamage: 5
            maxDamage: 10
        shield_bash:
          displayName: "Shield Bash"
          description: "Bash your foe with your shield."
          manaCost: 10
          cooldownMs: 3000
          levelRequired: 5
          targetType: ENEMY
          requiredClass: WARRIOR
          effect:
            type: DIRECT_DAMAGE
            minDamage: 8
            maxDamage: 14
        war_cry:
          displayName: "War Cry"
          description: "Rally yourself with a battle cry."
          manaCost: 15
          cooldownMs: 8000
          levelRequired: 10
          targetType: SELF
          requiredClass: WARRIOR
          effect:
            type: DIRECT_HEAL
            minHeal: 8
            maxHeal: 15
        battle_shout:
          displayName: "Battle Shout"
          description: "A war cry that increases your strength."
          manaCost: 10
          cooldownMs: 60000
          levelRequired: 3
          targetType: SELF
          requiredClass: WARRIOR
          effect:
            type: APPLY_STATUS
            statusEffectId: battle_shout
        # --- Mage ---
        arcane_bolt:
          displayName: "Arcane Bolt"
          description: "Hurl a bolt of arcane energy."
          manaCost: 6
          cooldownMs: 0
          levelRequired: 1
          targetType: ENEMY
          requiredClass: MAGE
          effect:
            type: DIRECT_DAMAGE
            minDamage: 4
            maxDamage: 9
        frost_nova:
          displayName: "Frost Nova"
          description: "Blast your enemy with freezing cold."
          manaCost: 15
          cooldownMs: 3000
          levelRequired: 5
          targetType: ENEMY
          requiredClass: MAGE
          effect:
            type: DIRECT_DAMAGE
            minDamage: 10
            maxDamage: 18
        inferno:
          displayName: "Inferno"
          description: "Engulf your foe in searing flames."
          manaCost: 25
          cooldownMs: 5000
          levelRequired: 10
          targetType: ENEMY
          requiredClass: MAGE
          effect:
            type: DIRECT_DAMAGE
            minDamage: 16
            maxDamage: 28
        ignite:
          displayName: "Ignite"
          description: "Sets the target ablaze, burning them for damage over time."
          manaCost: 12
          cooldownMs: 8000
          levelRequired: 3
          targetType: ENEMY
          requiredClass: MAGE
          effect:
            type: APPLY_STATUS
            statusEffectId: ignite
        # --- Cleric ---
        minor_heal:
          displayName: "Minor Heal"
          description: "Mend your wounds with holy light."
          manaCost: 8
          cooldownMs: 0
          levelRequired: 1
          targetType: SELF
          requiredClass: CLERIC
          effect:
            type: DIRECT_HEAL
            minHeal: 6
            maxHeal: 10
        smite:
          displayName: "Smite"
          description: "Strike your foe with divine wrath."
          manaCost: 12
          cooldownMs: 3000
          levelRequired: 5
          targetType: ENEMY
          requiredClass: CLERIC
          effect:
            type: DIRECT_DAMAGE
            minDamage: 6
            maxDamage: 12
        greater_heal:
          displayName: "Greater Heal"
          description: "A powerful wave of restorative energy."
          manaCost: 22
          cooldownMs: 8000
          levelRequired: 10
          targetType: SELF
          requiredClass: CLERIC
          effect:
            type: DIRECT_HEAL
            minHeal: 15
            maxHeal: 25
        shield_of_faith:
          displayName: "Shield of Faith"
          description: "Grants a shield that absorbs damage."
          manaCost: 15
          cooldownMs: 30000
          levelRequired: 5
          targetType: SELF
          requiredClass: CLERIC
          effect:
            type: APPLY_STATUS
            statusEffectId: shield_of_faith
        rejuvenation:
          displayName: "Rejuvenation"
          description: "Heals the caster over time."
          manaCost: 12
          cooldownMs: 15000
          levelRequired: 4
          targetType: SELF
          requiredClass: CLERIC
          effect:
            type: APPLY_STATUS
            statusEffectId: rejuvenation
        # --- Rogue ---
        backstab:
          displayName: "Backstab"
          description: "Strike from the shadows."
          manaCost: 6
          cooldownMs: 0
          levelRequired: 1
          targetType: ENEMY
          requiredClass: ROGUE
          effect:
            type: DIRECT_DAMAGE
            minDamage: 5
            maxDamage: 11
        poison_strike:
          displayName: "Poison Strike"
          description: "A venomous strike that poisons the target. Stacks up to 3 times."
          manaCost: 8
          cooldownMs: 5000
          levelRequired: 3
          targetType: ENEMY
          requiredClass: ROGUE
          effect:
            type: APPLY_STATUS
            statusEffectId: poison
        shadow_step:
          displayName: "Shadow Step"
          description: "Slip into the shadows to recover."
          manaCost: 18
          cooldownMs: 6000
          levelRequired: 10
          targetType: SELF
          requiredClass: ROGUE
          effect:
            type: DIRECT_HEAL
            minHeal: 10
            maxHeal: 18

  progression:
    maxLevel: 50
    xp:
      baseXp: 100
      exponent: 2.0
      linearXp: 0
      multiplier: 1.0
      defaultKillXp: 50
    rewards:
      hpPerLevel: 2
      manaPerLevel: 5
      fullHealOnLevelUp: true
      fullManaOnLevelUp: true

  transport:
    telnet:
      maxLineLen: 1024
      maxNonPrintablePerLine: 32
    websocket:
      host: 0.0.0.0
      stopGraceMillis: 1000
      stopTimeoutMillis: 2000
    maxInboundBackpressureFailures: 3

  demo:
    autoLaunchBrowser: false
    webClientHost: localhost

  observability:
    metricsEnabled: true
    metricsEndpoint: "/metrics"
    metricsHttpPort: 9090
    staticTags: {}

  logging:
    level: INFO
    packageLevels:
      dev.ambon.transport: INFO
      dev.ambon.engine: INFO

  redis:
    enabled: false
    uri: "redis://localhost:6379"
    cacheTtlSeconds: 3600
    bus:
      enabled: false
      inboundChannel: ambon:inbound
      outboundChannel: ambon:outbound
      instanceId: ""
      sharedSecret: "CHANGE_ME"
