ambonMUD:
  mode: STANDALONE

  sharding:
    enabled: false
    engineId: engine-1
    zones: []
    advertiseHost: localhost
    # Optional explicit advertised port override. When omitted, the server
    # uses mode-specific defaults (ENGINE=grpc.server.port, STANDALONE=telnetPort).
    #advertisePort: 9090
    registry:
      # STATIC (default) or REDIS
      type: STATIC
      leaseTtlSeconds: 30
      # Optional static assignments used when type=STATIC. If empty, sharded
      # engines only know their own local zone ownership.
      assignments: []
      #assignments:
      #  - engineId: engine-1
      #    host: localhost
      #    port: 9091
      #    zones: [ambon_hub, demo_ruins]
      #  - engineId: engine-2
      #    host: localhost
      #    port: 9092
      #    zones: [noecker_resume]
    handoff:
      ackTimeoutMs: 2000
    # Redis player-location index for O(1) cross-engine tell routing.
    # Requires sharding.enabled=true and redis.enabled=true.
    playerIndex:
      enabled: false
      heartbeatMs: 10000

  grpc:
    server:
      port: 9090
    client:
      engineHost: localhost
      enginePort: 9090

  gateway:
    id: 0
    snowflake:
      idLeaseTtlSeconds: 300
    reconnect:
      maxAttempts: 10
      initialDelayMs: 1000
      maxDelayMs: 30000
      jitterFactor: 0.2
      streamVerifyMs: 2000
    # Multi-engine mode: when engines list is non-empty, the gateway connects
    # to all listed engines and uses SessionRouter for session-to-engine routing.
    # Leave empty for single-engine mode (uses grpc.client config instead).
    engines: []
    #engines:
    #  - id: engine-1
    #    host: localhost
    #    port: 9091
    #  - id: engine-2
    #    host: localhost
    #    port: 9092

  server:
    telnetPort: 4000
    webPort: 8080
    inboundChannelCapacity: 10000
    outboundChannelCapacity: 10000
    sessionOutboundQueueCapacity: 200
    maxInboundEventsPerTick: 1000
    tickMillis: 100

  world:
    resources:
      - world/tutorial_glade.yaml
      - world/ambon_hub.yaml
      - world/noecker_resume.yaml
      - world/demo_ruins.yaml

  persistence:
    backend: YAML
    rootDir: data/players
    worker:
      enabled: true
      flushIntervalMs: 5000

  database:
    jdbcUrl: "jdbc:postgresql://localhost:5432/ambonmud"
    username: ambon
    password: ambon
    maxPoolSize: 5
    minimumIdle: 1

  login:
    maxWrongPasswordRetries: 3
    maxFailedAttemptsBeforeDisconnect: 3

  engine:
    mob:
      maxMovesPerTick: 10
      minWanderDelayMillis: 5000
      maxWanderDelayMillis: 12000
      tiers:
        weak:
          baseHp: 5
          hpPerLevel: 2
          baseMinDamage: 1
          baseMaxDamage: 2
          damagePerLevel: 0
          baseArmor: 0
          baseXpReward: 15
          xpRewardPerLevel: 5
        standard:
          baseHp: 10
          hpPerLevel: 3
          baseMinDamage: 1
          baseMaxDamage: 4
          damagePerLevel: 1
          baseArmor: 0
          baseXpReward: 30
          xpRewardPerLevel: 10
        elite:
          baseHp: 20
          hpPerLevel: 5
          baseMinDamage: 2
          baseMaxDamage: 6
          damagePerLevel: 1
          baseArmor: 1
          baseXpReward: 75
          xpRewardPerLevel: 20
        boss:
          baseHp: 50
          hpPerLevel: 10
          baseMinDamage: 3
          baseMaxDamage: 8
          damagePerLevel: 2
          baseArmor: 3
          baseXpReward: 200
          xpRewardPerLevel: 50
    combat:
      maxCombatsPerTick: 20
      tickMillis: 1000
      minDamage: 1
      maxDamage: 4
      feedback:
        enabled: true
        roomBroadcastEnabled: false
    regen:
      maxPlayersPerTick: 50
      baseIntervalMillis: 5000
      minIntervalMillis: 1000
      msPerConstitution: 200
      regenAmount: 1
      mana:
        baseIntervalMillis: 3000
        minIntervalMillis: 1000
        regenAmount: 1
    scheduler:
      maxActionsPerTick: 100
    abilities:
      definitions:
        magic_missile:
          displayName: "Magic Missile"
          description: "Hurls a bolt of arcane energy at your foe."
          manaCost: 8
          cooldownMs: 0
          levelRequired: 1
          targetType: ENEMY
          effect:
            type: DIRECT_DAMAGE
            minDamage: 4
            maxDamage: 8
        heal:
          displayName: "Heal"
          description: "Mend your wounds with restorative magic."
          manaCost: 10
          cooldownMs: 5000
          levelRequired: 1
          targetType: SELF
          effect:
            type: DIRECT_HEAL
            minHeal: 6
            maxHeal: 10
        fireball:
          displayName: "Fireball"
          description: "Engulf your enemy in flames."
          manaCost: 15
          cooldownMs: 3000
          levelRequired: 5
          targetType: ENEMY
          effect:
            type: DIRECT_DAMAGE
            minDamage: 8
            maxDamage: 16
        mend:
          displayName: "Mend"
          description: "A powerful healing spell that restores significant health."
          manaCost: 25
          cooldownMs: 8000
          levelRequired: 10
          targetType: SELF
          effect:
            type: DIRECT_HEAL
            minHeal: 15
            maxHeal: 25

  progression:
    maxLevel: 50
    xp:
      baseXp: 100
      exponent: 2.0
      linearXp: 0
      multiplier: 1.0
      defaultKillXp: 50
    rewards:
      hpPerLevel: 2
      manaPerLevel: 5
      fullHealOnLevelUp: true
      fullManaOnLevelUp: true

  transport:
    telnet:
      maxLineLen: 1024
      maxNonPrintablePerLine: 32
    websocket:
      host: 0.0.0.0
      stopGraceMillis: 1000
      stopTimeoutMillis: 2000
    maxInboundBackpressureFailures: 3

  demo:
    autoLaunchBrowser: false
    webClientHost: localhost

  observability:
    metricsEnabled: true
    metricsEndpoint: "/metrics"
    metricsHttpPort: 9090
    staticTags: {}

  logging:
    level: INFO
    packageLevels:
      dev.ambon.transport: INFO
      dev.ambon.engine: INFO

  redis:
    enabled: false
    uri: "redis://localhost:6379"
    cacheTtlSeconds: 3600
    bus:
      enabled: false
      inboundChannel: ambon:inbound
      outboundChannel: ambon:outbound
      instanceId: ""
